<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        //        // 23.3.1 Simple Value
        //        "use strict";
        //        let o1 = JSON.parse(0);
        //        console.log(typeof o1, o1);
        //
        //        // TODO: Error
        //        //let o2 = JSON.parse("Hello World!");
        //        //console.log(typeof o2, o2);
        //
        //        // TODO:23.1.2 Object
        ////        let o3 = JSON.parse({
        ////            "name": "Nicholas",
        ////            "age": 29
        ////        });
        ////        console.log(typeof o3, o3);
        //
        //        // TODO:23.1.3 数组
        ////        let o4 = JSON.parse([25, "hi", true]);
        ////        console.log(typeof o4, o4);
        //
        //
        // 23.2.1 JSON Object
        let book = {
            title: "Professional JavaScript",
            authors: [
                "Nicholas C. Zakas",
                "Matt Frisbie"
            ],
            edition: 4,
            year: 2017
        }
        //        console.log(typeof book, book);
        //        let jsonText = JSON.stringify(book);
        //        console.log(typeof jsonText, jsonText);
        //        let bookCopy = JSON.parse(jsonText);
        //        console.log(typeof bookCopy, bookCopy);
        //
        //        console.log(`>>> book1: ${book}`);
        //        // 23.2.2 序列化选项
        //        jsonText = JSON.stringify(book, ["title", "edition"]);
        //        console.log(typeof jsonText, jsonText);

        // TODO: Error
        //        let book1 = {
        //            title: "Professional JavaScript",
        //            authors: [
        //                "Nicholas C. Zakas",
        //                "Matt Frisbie"
        //            ],
        //            edition: 4,
        //            year: 2017
        //        };
        //        console.log(book1);
        //        let jsonText1 = JSON.stringify(book1, (key, value) => {
        //            switch (key) {
        //                case "authors":
        //                    return value.join(",")
        //                case "year":
        //                    return 5000;
        //                case "edition":
        //                    <!--return undefined;-->
        //                    return 10;
        //                default:
        //                    value;
        //            }
        //        });
        //        console.log(jsonText1);

        //let jsonText = JSON.stringify(book, null, 4);
        let jsonText = JSON.stringify(book, null, '--');
        console.log(jsonText);

        book = {
            title: "Professional JavaScript",
            authors: [
                "Nicholas C. Zakas",
                "Matt Frisbie"
            ],
            edition: 4,
            year: 2017,
            toJSON: function() {
                return this.title;
            }
        }

        jsonText = JSON.stringify(book);
        console.log(jsonText);

        // 23.2.3
        console.log(new Date(2017, 11, 31));
        book.releaseDate = new Date(2017, 11, 31);
        console.log(book);
        console.log(new Date("Sun Dec 31 2017 00:00:00 GMT+0800 (China Standard Time)").getFullYear());
        jsonText = JSON.stringify(book);
        var bookCopy1 = JSON.parse(jsonText, (key, value) => {
            key == "releaseDate" ? new Date(value) : value;
        });
        console.log(bookCopy1);
    </script>
</body>

</html>
